<link href="//vjs.zencdn.net/7.0/video-js.min.css" rel="stylesheet" />
<script src="//vjs.zencdn.net/7.0/video.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/videojs-contrib-hls/5.14.1/videojs-contrib-hls.js"></script>

<div class="container-fluid">
  <div class="row">
    <div class="col-sm-12" style="padding: 0; position: relative">
      <div id="map" class="map_container"></div>
      <div class="map_info_panel">
        <h5>Маршрут:</h5>
        <p class="info_track_name">
          {{ activity.name }}
        </p>
        <div class="panel_delimiter"></div>
        <h5>Характеристики:</h5>
        <div class="cname">Общий вес (кг):</div><div class="cinfo" *ngIf="totalWeight as value">{{ value }}</div><br>
        <div class="cname">Вес груза (кг):</div><div class="cinfo" *ngIf="cargoWeight as value">{{ value }}</div><br>
        <div class="cname">Текущая скорость:</div><div class="cinfo" *ngIf="positionInfo.currentSpeed as value">{{ value }} км/ч</div><br>
        <div class="cname">Пройденная дистанция (км):</div><div class="cinfo" *ngIf="positionInfo.passedDistance as value">{{ value }}</div>
        <div *ngFor="let axis of positionInfo.snapshot.data">
          <span class="cname">Нагрузка, ось {{ axis.axisId }}:</span><span class="cinfo">{{ axis.weight }} кг</span><br>
        </div>
        <div class="panel_video">
          <sxm-videosm></sxm-videosm>
        </div>
      </div>
    </div>
  </div>


  <ng-container *ngIf="positionInfo">
    <div class="container">
      <div class="row">
        <!-- toggle tracking -->
        <div *ngIf="panToToggle; then trackOn else trackOff"></div>
        <!-- toggle axel Loads -->
        <div *ngIf="axelToggle; then axelOn else axelOff"></div>
        <div class="col-6"></div>
      </div>
    </div>
    <div class="col-md-12">
      <table class="table table-dark">
        <thead>
          <tr>
            <th scope="row">общий вес (кг)</th>
            <!-- <th scope="row">вес машины</th> -->
            <th *ngIf="cargoWeight" scope="row">вес груза (кг)</th>
            <th scope="row">
              текущая скорость
            </th>
            <th scope="row">
              пройденная дистанция (км)
            </th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td *ngIf="totalWeight as value">{{ value }}</td>
            <!-- <td *ngIf="vehicleWeight as value">{{ value }} кг</td> -->
            <td *ngIf="cargoWeight as value">{{ value }}</td>
            <td *ngIf="positionInfo.currentSpeed as value">{{ value }} км/ч</td>
            <td *ngIf="positionInfo.passedDistance as value">{{ value }}</td>
            <!-- <td *ngIf="metersPassed as value">{{ value }}</td> -->
            <!-- <td *ngIf="currentLatLng as value">
              {{ value.lat }}<br />{{ value.lng }}
            </td> -->
          </tr>
          <tr>
            <td colspan="3">
              <sxm-video></sxm-video>
            </td>
            <td colspan="1">
              <ul *ngIf="axelToggle">
                <li *ngFor="let axis of positionInfo.snapshot.data">
                  ось {{ axis.axisId }}: {{ axis.weight }} кг
                </li>
              </ul>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </ng-container>
</div>


<ng-template #trackOn>
  <div class="col">
    <button type="button" class="btn btn-outline-success btn-block" (click)="togglePanTo()">Отключить
      трэкинг</button>
  </div>
</ng-template>
<ng-template #trackOff>
  <div class="col">
    <button type="button" class="btn btn-dark btn-block" (click)="togglePanTo()">Включить трэкинг</button>
  </div>
</ng-template>

<ng-template #axelOn>
  <div class="col">
    <button type="button" class="btn btn-outline-success btn-block" (click)="toggleLoads()">Отключить вывод
      нагрузки</button>
  </div>
</ng-template>
<ng-template #axelOff>
  <div class="col">
    <button type="button" class="btn btn-dark btn-block" (click)="toggleLoads()">Включить вывод
      нагрузки</button>
  </div>
</ng-template>
