<link href="//vjs.zencdn.net/7.0/video-js.min.css" rel="stylesheet" />
<script src="//vjs.zencdn.net/7.0/video.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/videojs-contrib-hls/5.14.1/videojs-contrib-hls.js"></script>

<div class="app-row">
  <div class="col-md-12" id="heading">
    <!-- <h3 class="heading">{{ activity.name }}</h3> -->
    <nav aria-label="breadcrumb">
      <ol class="breadcrumb">
        <li class="breadcrumb-item active" aria-current="page">{{ activity.name }}</li>
      </ol>
    </nav>
    <div id="map"></div>
  </div>

  <ng-container *ngIf="positionInfo">
    <div class="container">
      <div class="row">
        <!-- toggle tracking -->
        <div *ngIf="panToToggle; then trackOn else trackOff"></div>
        <!-- toggle axel Loads -->
        <div *ngIf="axelToggle; then axelOn else axelOff"></div>
        <div class="col-6"></div>
      </div>
    </div>
    <div class="col-md-12">
      <table class="table table-dark">
        <thead>
          <tr>
            <th scope="row">общий вес (кг)</th>
            <!-- <th scope="row">вес машины</th> -->
            <th *ngIf="cargoWeight" scope="row">вес груза (кг)</th>
            <th scope="row">
              текущая скорость
            </th>
            <th scope="row">
              пройденная дистанция (км)
            </th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td *ngIf="totalWeight as value">{{ value }}</td>
            <!-- <td *ngIf="vehicleWeight as value">{{ value }} кг</td> -->
            <td *ngIf="cargoWeight">{{ cargoWeight.value }}</td>
            <td *ngIf="positionInfo.currentSpeed as value">{{ value }} км/ч</td>
            <td *ngIf="positionInfo.passedDistance as value">{{ value }}</td>
            <!-- <td *ngIf="metersPassed as value">{{ value }}</td> -->
            <!-- <td *ngIf="currentLatLng as value">
              {{ value.lat }}<br />{{ value.lng }}
            </td> -->
          </tr>
          <tr>
            <td colspan="3">
              <sxm-video></sxm-video>
            </td>
            <td colspan="1">
              <ul *ngIf="axelToggle">
                <li *ngFor="let axis of positionInfo.snapshot.data">
                  ось {{ axis.axisId }}: {{ axis.weight }} кг
                </li>
              </ul>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </ng-container>
</div>


<ng-template #trackOn>
  <div class="col">
    <button type="button" class="btn btn-outline-success btn-block" (click)="togglePanTo()">Отключить
      трэкинг</button>
  </div>
</ng-template>
<ng-template #trackOff>
  <div class="col">
    <button type="button" class="btn btn-dark btn-block" (click)="togglePanTo()">Включить трэкинг</button>
  </div>
</ng-template>

<ng-template #axelOn>
  <div class="col">
    <button type="button" class="btn btn-outline-success btn-block" (click)="toggleLoads()">Отключить вывод
      нагрузки</button>
  </div>
</ng-template>
<ng-template #axelOff>
  <div class="col">
    <button type="button" class="btn btn-dark btn-block" (click)="toggleLoads()">Включить вывод
      нагрузки</button>
  </div>
</ng-template>
